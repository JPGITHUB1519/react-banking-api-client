(this["webpackJsonpreact-banking-api-client"]=this["webpackJsonpreact-banking-api-client"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},62:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),c=n(20),s=n.n(c),i=(n(28),n(29),n(30),n(31),n(32),n(33),n(1)),o=n.n(i),l=n(12),u=n(3),h=n(11),d=n(5),p=n(6),b=n(2),f=n(8),j=n(7),m=n(0),k=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(b.a)(a)),a}return Object(p.a)(n,[{key:"handleClick",value:function(){this.props.onCloseClick()}},{key:"render",value:function(){return void 0!==this.props.show&&!1===this.props.show?null:Object(m.jsxs)("div",{className:"alert alert--".concat(this.props.type),children:[this.props.children,this.props.html&&Object(m.jsx)("span",{dangerouslySetInnerHTML:{__html:this.props.html}}),Object(m.jsx)("button",{className:"alert__close",onClick:this.handleClick,children:Object(m.jsx)("span",{children:"\xd7"})})]})}}]),n}(r.a.Component);k.defaultProps={type:"primary"};var v=k;function O(e){return Object(m.jsx)("button",{className:"button button--red button--size-medium button--spacing-".concat(e.spacing),onClick:e.onClick,children:e.title})}O.defaultProps={title:"Button",spacing:"small"};var C,x=O;function g(e,t,n){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(o.a.mark((function e(t,n,a){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/transactions"),{method:"post",body:JSON.stringify({amount:t,transferorAccountId:n,transfereeAccountId:a})});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("development"),C="http://localhost:8090/php-banking-api-test-gpcuaw/project/api";var w=n(15),N=n.n(w),S=n(21),A=n.n(S),P=n(22),D=n.n(P),I=n(23),B=n.n(I);var R=function(e){return Object(m.jsxs)("p",{className:"object-detail",children:[Object(m.jsxs)("span",{className:"bold",children:[e.title,": "]}),Object(m.jsx)("span",{children:e.value})]})},M=function(e){return Object.keys(e).map((function(t,n){return Object(m.jsx)(R,{title:t,value:e[t]},n)}))},F=function(e){return A()(N()(e)).replace(/ /g,"")},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a={};return e.forEach((function(e){a["".concat(t).concat(e.id)]=n})),a};function E(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"camelCase";switch(n){case"camelCase":t=N()(e);break;case"pascalCase":t=F(e);break;case"snakeCase":t=D()(e);break;case"kebabCase":t=B()(e);break;default:t=N()(e)}return t}var L=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={amount:"",transferorAccountId:"",transfereeAccountId:"",showAlert:!0,formAlert:{show:!1,type:"info",content:[]}},a.initialInput=r.a.createRef(),a.handleInputChange=a.handleInputChange.bind(Object(b.a)(a)),a.handleClick=a.handleClick.bind(Object(b.a)(a)),a.handleAlertCloseClick=a.handleAlertCloseClick.bind(Object(b.a)(a)),a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.focusInitialInput()}},{key:"handleInputChange",value:function(e){var t=e.target;this.setState(Object(h.a)({},t.name,t.value))}},{key:"handleAlertCloseClick",value:function(){this.setState((function(e){return{formAlert:{show:!e.formAlert.show}}}))}},{key:"handleClick",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=this.validateForm(),0!==Object.keys(n).length){e.next=10;break}return e.next=5,this.transferMoney();case 5:"successful"===(a=e.sent).transactionStatus&&(r=[Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("strong",{children:"Successfull Transaction!"}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{})]})].concat(Object(l.a)(M(a.data))),this.setState({formAlert:{show:!0,type:"success",content:r}}),this.clearForm()),"failed"===a.transactionStatus&&this.showErrorAlert(a.message),e.next=11;break;case 10:this.showErrorAlert(n);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transferMoney",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.amount,n=this.state.transferorAccountId,a=this.state.transfereeAccountId,e.next=5,g(t,n,a);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateForm",value:function(){var e=this.state.amount,t=this.state.transferorAccountId,n=this.state.transfereeAccountId,a={};return e?isNaN(e)?a.amount="Amount should be a numeric value":Number(e)<=0&&(a.amount="Amount cannot be 0 or a negative value"):a.amount="Amount cannot be empty",t||(a.transferorAccountId="Transferor account number cannot be empty"),n||(a.transfereeAccountId="Transferee account number cannot be empty"),t&&t&&t===n&&(a.transferorAccountId="Transferor and Transferee accounts cannot be equal",a.transfereeAccountId="Transferor and Transferee accounts cannot be equal"),a}},{key:"clearForm",value:function(){this.setState({amount:"",transferorAccountId:"",transfereeAccountId:""}),this.focusInitialInput()}},{key:"focusInitialInput",value:function(){this.initialInput.current.focus()}},{key:"showErrorAlert",value:function(e){var t=M(e);this.setState({formAlert:{show:!0,type:"danger",content:t}})}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"section section--height-fullviewport",children:[Object(m.jsx)("h1",{className:"section-title",children:"Bank Transaction"}),Object(m.jsxs)("form",{className:"form",children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Amount"}),Object(m.jsx)("input",{ref:this.initialInput,className:"form-input",type:"number",name:"amount",value:this.state.amount,onChange:this.handleInputChange})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Transferor Account"}),Object(m.jsx)("input",{className:"form-input",type:"text",name:"transferorAccountId",value:this.state.transferorAccountId,onChange:this.handleInputChange})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:"Transferee Account"}),Object(m.jsx)("input",{className:"form-input",type:"text",name:"transfereeAccountId",value:this.state.transfereeAccountId,onChange:this.handleInputChange})]}),Object(m.jsx)(x,{title:"Transfer",onClick:this.handleClick})]}),Object(m.jsx)(v,{type:this.state.formAlert.type,show:this.state.formAlert.show,onCloseClick:this.handleAlertCloseClick,children:this.state.formAlert.content})]})}}]),n}(r.a.Component);var T=function(e){return Object(m.jsx)("button",{className:"button button--".concat(e.type,"-bg button--size-small"),onClick:e.onClick})},U=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleInputChange=a.handleInputChange.bind(Object(b.a)(a)),a.handleSearchClick=a.handleSearchClick.bind(Object(b.a)(a)),a}return Object(p.a)(n,[{key:"handleSearchClick",value:function(e){e.preventDefault(),this.props.onSearchClick()}},{key:"handleInputChange",value:function(e){this.props.onInputChange(e.target.value)}},{key:"render",value:function(){return Object(m.jsx)(r.a.Fragment,{children:Object(m.jsxs)("form",{className:"form",children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"form-label",children:this.props.title}),Object(m.jsx)("input",{className:"form-input",type:"text",name:"search-value",value:this.props.value,onChange:this.handleInputChange}),"background"===this.props.typeOfButton&&Object(m.jsx)(T,{type:"search",onClick:this.handleSearchClick})]}),"text"===this.props.typeOfButton&&Object(m.jsx)(x,{title:"Search",onClick:this.handleSearchClick})]})})}}]),n}(r.a.Component);U.defaultProps={typeOfButton:"text"};var _=U,J=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(b.a)(a)),a}return Object(p.a)(n,[{key:"handleClick",value:function(e){this.props.onCloseClick()}},{key:"render",value:function(){return void 0!==this.props.show&&!1===this.props.show?null:Object(m.jsx)("div",{className:"modal",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("span",{className:"modal-close-button",onClick:this.handleClick,children:"\xd7"}),Object(m.jsx)("h2",{children:this.props.header})]}),Object(m.jsx)("div",{className:"modal-body",children:this.props.children}),Object(m.jsx)("div",{className:"modal-footer",children:Object(m.jsx)("h3",{children:this.props.footer})})]})})}}]),n}(r.a.Component),q=(n(62),n(10)),z=n.n(q);function H(e){if(!e.show)return null;var t;if(e.customOptions){var n={};e.customOptions.base&&(n.borderColor=e.customOptions.base),e.customOptions.border&&(n.borderTopColor=e.customOptions.border),e.customOptions.width&&(n.width=e.customOptions.width),e.customOptions.height&&(n.height=e.customOptions.height),t=Object(m.jsx)("div",{className:"loader",style:n})}else t=Object(m.jsx)("div",{className:"loader loader--color-".concat(e.color)});return t}H.propTypes={color:z.a.string,show:z.a.bool,customOptions:z.a.shape({base:z.a.string,border:z.a.string,width:z.a.number,height:z.a.number})},H.defaultProps={color:"red",show:!0};var G=n(9);var K=function(e){return Object(m.jsxs)("tr",{"data-id":e.id,children:[e.bulkDeleting&&Object.keys(e.checkboxes).length>0&&Object(m.jsx)("td",{children:Object(m.jsx)("input",{type:"checkbox",name:"".concat(e.id),checked:e.checkboxes["".concat(e.id)],onChange:e.onCheckboxValueChange})}),Object.keys(e.columns).map((function(t){if(t in e.rowData)return Object(m.jsx)("td",{children:e.rowData[t]},t)})),e.actionButtons&&Object(m.jsxs)("td",{children:[Object(m.jsx)(T,{type:"edit",onClick:e.onEditActionButtonClick}),Object(m.jsx)(T,{type:"delete",onClick:e.onDeleteActionButtonClick}),Object(m.jsx)(T,{type:"read",onClick:e.onViewActionButtonClick})]})]})},Q=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(d.a)(this,n),t.call(this,e)}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return this.columns||(this.props.columns?this.columns=this.props.columns:this.columns=function(e){if(e&&e[0]){var t=e[0],n=Object.keys(t),a={};return n.forEach((function(e){a[e]=e})),a}return{}}(this.props.rows)),Object(m.jsx)("div",{className:"table-container",children:Object(m.jsxs)("table",{className:"datatable datatable--".concat(this.props.theme,"-theme"),children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[this.props.bulkDeleting&&Object(m.jsx)("th",{}),Object.keys(this.columns).map((function(t,n){return Object(m.jsx)("th",{children:e.columns[t]},n)})),this.props.actionButtons&&Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsx)("tbody",{children:this.props.rows.map((function(t){return Object(m.jsx)(K,{id:t.id,rowData:t,columns:e.columns,checkboxes:e.props.checkboxes,onCheckboxValueChange:e.props.onCheckboxValueChange,bulkDeleting:e.props.bulkDeleting,actionButtons:e.props.actionButtons,onEditActionButtonClick:e.props.onEditActionButtonClick,onDeleteActionButtonClick:e.props.onDeleteActionButtonClick,onViewActionButtonClick:e.props.onViewActionButtonClick},t.id)}))})]})})}}]),n}(r.a.Component);Q.defaultProps={bulkDeleting:!0,checkboxes:{},actionButtons:!0,theme:"red"};var W=Q;var X=function(e){return Object(m.jsx)("div",{className:"button-container",children:e.children})},Y=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={form:{},formAlert:{show:!1,type:"info",content:[]}},a.handleSaveClick=a.handleSaveClick.bind(Object(b.a)(a)),a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleAlertCloseClick=a.handleAlertCloseClick.bind(Object(b.a)(a)),a.handleCloseModalClick=a.handleCloseModalClick.bind(Object(b.a)(a)),a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},"create"===this.props.action&&(Object.keys(this.props.formFields).forEach((function(e){t[e]=""})),this.setState({form:t}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"update"===this.props.action&&t.selectedRecord.id!==this.props.selectedRecord.id&&this.fillFormStateFromRecord(this.props.selectedRecord);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"fillFormStateFromRecord",value:function(e){e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"camelCase",n={};return Object.keys(e).forEach((function(a){n[E(a,t)]=e[a]})),n}(e,"camelcase");var t={};for(var n in e)t[n]=e[n];this.setState({form:t})}},{key:"handleSaveClick",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=this.validateForm(),0===Object.keys(n).length?("create"===this.props.action&&this.create(n),"update"===this.props.action&&this.update(n)):this.showErrorAlert(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showErrorAlert",value:function(e){var t=M(e);this.setState({formAlert:{show:!0,type:"danger",content:t}})}},{key:"handleChange",value:function(e){this.setState((function(t){return{form:Object(G.a)(Object(G.a)({},t.form),{},Object(h.a)({},e.target.name,e.target.value))}}))}},{key:"create",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.create(this.state.form);case 2:(n=e.sent).error?this.showErrorAlert(n):(this.props.resetDatatable(),a=[Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("strong",{children:Object(m.jsx)("p",{children:"Record Added Succesfully!"})}),Object(m.jsx)("br",{})]})].concat(Object(l.a)(M(n))),this.clearForm(),this.setState({formAlert:{show:!0,type:"success",content:a}}),this.closeAlert(5e3));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.update(this.state.form);case 2:(n=e.sent).error?this.showErrorAlert(n):(this.props.resetDatatable(),a=[Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("strong",{children:Object(m.jsx)("p",{children:"Record Updated Successfully"})}),Object(m.jsx)("br",{})]})].concat(Object(l.a)(M(n))),this.setState({formAlert:{show:!0,type:"success",content:a}}),this.closeAlert(5e3));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearForm",value:function(){var e={};for(var t in this.state.form)e[t]="";this.setState({form:e})}},{key:"validateForm",value:function(){var e=this.state.form,t={};for(var n in e)this.props.formFields[n].isRequired&&(e[n]||(t[n]="".concat(n," cannot be empty")));return t}},{key:"closeAlert",value:function(e){var t=this;e?setTimeout((function(){t.setState({formAlert:{show:!1}})}),e):this.setState({formAlert:{show:!1}})}},{key:"handleAlertCloseClick",value:function(){this.closeAlert()}},{key:"handleCloseModalClick",value:function(){this.closeAlert(),this.props.onCloseClick()}},{key:"render",value:function(){var e=this,t=this.props.formFields,n="";return"create"===this.props.action?n="Create ".concat(this.props.entityName," Record"):"update"===this.props.action&&(n="Update ".concat(this.props.entityName," Record")),Object(m.jsxs)(J,{header:n,show:this.props.show,onCloseClick:this.handleCloseModalClick,children:[Object(m.jsx)("form",{className:"form",children:Object.keys(t).map((function(n,a){var r=t[n].disabled;if("create"!==e.props.action||"id"!==n)return"update"===e.props.action&&"id"===n&&(r=!0),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:n}),Object(m.jsx)("input",{name:n,type:t[n].type,className:"form-input",value:e.state.form[n]||"",onChange:e.handleChange,disabled:r})]},a)}))}),Object(m.jsx)(v,{type:this.state.formAlert.type,show:this.state.formAlert.show,onCloseClick:this.handleAlertCloseClick,children:this.state.formAlert.content}),Object(m.jsx)(x,{title:"Save",onClick:this.handleSaveClick})]})}}]),n}(r.a.Component);Y.defaultProps={action:"create",pagination:!0};var Z=Y;var $=function(e){return Object(m.jsx)("div",{className:"card",children:e.children})};var ee=function(e){var t=M(e.record);return Object(m.jsx)($,{children:t})},te=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleCloseModalClick=a.handleCloseModalClick.bind(Object(b.a)(a)),a}return Object(p.a)(n,[{key:"handleCloseModalClick",value:function(){this.props.onCloseClick()}},{key:"render",value:function(){return Object(m.jsx)(J,{header:"View Record Modal",onCloseClick:this.handleCloseModalClick,children:Object(m.jsx)("div",{className:"view-record",children:Object(m.jsx)(ee,{record:this.props.record})})})}}]),n}(r.a.Component);function ne(e){return e.show?Object(m.jsx)("div",{className:"full-screen-black-overlay",children:Object(m.jsx)("div",{className:"full-screen-modal-container",children:Object(m.jsx)(H,{color:e.color})})}):null}ne.defaultProps={color:"red",show:!0};var ae=ne;function re(e){return Object(m.jsx)("p",{className:"no-results-paragraph",children:e.message})}re.defaultProps={message:"No results have been found."};var ce=re,se=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handlePreviousClick=a.handlePreviousClick.bind(Object(b.a)(a)),a.handleNextClick=a.handleNextClick.bind(Object(b.a)(a)),a.handlePageNumberClick=a.handlePageNumberClick.bind(Object(b.a)(a)),a}return Object(p.a)(n,[{key:"handlePreviousClick",value:function(e){e.preventDefault(),this.props.onPreviousClick(e)}},{key:"handlePageNumberClick",value:function(e){e.preventDefault();var t=parseInt(e.target.parentNode.dataset.page);this.props.onPageNumberClick(t)}},{key:"handleNextClick",value:function(e){e.preventDefault(),this.props.onNextClick(e)}},{key:"render",value:function(){for(var e,t=[],n=1;n<=this.props.totalPages;n++)e=Object(m.jsx)("li",{"data-page":n,className:"page-item",children:Object(m.jsx)("a",{className:"page-link ".concat(this.props.activePage===n?"page-link--active":""," "),href:"#",onClick:this.handlePageNumberClick,children:n})},n),t.push(e);return Object(m.jsx)("nav",{className:"pagination-container",children:Object(m.jsxs)("ul",{className:"pagination",children:[Object(m.jsx)("li",{className:"page-item",children:Object(m.jsx)("a",{className:"page-link ".concat(this.props.isPreviousEnabled?"":"page-link--disabled"," "),href:"#",onClick:this.handlePreviousClick,children:"Previous"})}),t,Object(m.jsx)("li",{className:"page-item",children:Object(m.jsx)("a",{className:"page-link ".concat(this.props.isNextEnabled?"":"page-link--disabled"," "),href:"#",onClick:this.handleNextClick,children:"Next"})})]})})}}]),n}(r.a.Component),ie=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={searchText:"",checkboxes:{},data:[],isDataLoaded:!1,showCreateRecordModal:!1,showUpdateRecordModal:!1,showViewRecordModal:!1,showFullScreenLoader:!1,selectedRecord:{},pagination:{page:1,isPreviousEnabled:!1,isNextEnabled:!0,totalPages:1}},a.handleSearchValueChange=a.handleSearchValueChange.bind(Object(b.a)(a)),a.handleCheckboxValueChange=a.handleCheckboxValueChange.bind(Object(b.a)(a)),a.handleSearchClick=a.handleSearchClick.bind(Object(b.a)(a)),a.handleAddRecordModalClick=a.handleAddRecordModalClick.bind(Object(b.a)(a)),a.handleEditActionButtonClick=a.handleEditActionButtonClick.bind(Object(b.a)(a)),a.handleViewActionButtonClick=a.handleViewActionButtonClick.bind(Object(b.a)(a)),a.handleDeleteActionButtonClick=a.handleDeleteActionButtonClick.bind(Object(b.a)(a)),a.handleBulkDeletingButton=a.handleBulkDeletingButton.bind(Object(b.a)(a)),a.handleCloseModalClick=a.handleCloseModalClick.bind(Object(b.a)(a)),a.handlePaginationPreviousClick=a.handlePaginationPreviousClick.bind(Object(b.a)(a)),a.handlePaginationNumberClick=a.handlePaginationNumberClick.bind(Object(b.a)(a)),a.handlePaginationNextClick=a.handlePaginationNextClick.bind(Object(b.a)(a)),a.fillDatatable=a.fillDatatable.bind(Object(b.a)(a)),a.resetDatatable=a.resetDatatable.bind(Object(b.a)(a)),a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.resetDatatable();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetDatatable",value:function(){this.props.pagination?this.setPageOnPagination(1):this.fillDatatable()}},{key:"fillDatatable",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r,c,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:null,n=s.length>1&&void 0!==s[1]?s[1]:null,r={},this.setState({isDataLoaded:!1}),t){e.next=17;break}if(!n){e.next=12;break}return e.next=8,this.props.read(n,this.props.perPage);case 8:a=e.sent,r.pagination=Object(G.a)(Object(G.a)({},this.state.pagination),{},{totalPages:a.total_pages}),e.next=15;break;case 12:return e.next=14,this.props.read();case 14:a=e.sent;case 15:e.next=20;break;case 17:return e.next=19,this.props.search(t);case 19:a=e.sent;case 20:a=a.data?a.data:[],r.data=a,r.isDataLoaded=!0,this.props.bulkDeleting&&(c=V(a),r.checkboxes=c),this.setState(r);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSearchValueChange",value:function(e){this.setState({searchText:e})}},{key:"handleCheckboxValueChange",value:function(e){var t=e.target,n=e.target.name;if("checkbox"===t.type){var a=t.checked,r=Object(G.a)({},this.state.checkboxes);r[n]=a,this.setState({checkboxes:r})}}},{key:"handleSearchClick",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.searchText?this.fillDatatable(this.state.searchText):this.resetDatatable();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleAddRecordModalClick",value:function(){this.setState({showCreateRecordModal:!0})}},{key:"handleEditActionButtonClick",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getSelectedRecordId(t),this.showFullScreenLoader(),e.next=4,this.props.findById(n);case 4:a=e.sent,this.hideFullScreenLoader(),this.setState({selectedRecord:a,showUpdateRecordModal:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleViewActionButtonClick",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getSelectedRecordId(t),this.showFullScreenLoader(),e.next=4,this.props.findById(n);case 4:a=e.sent,this.hideFullScreenLoader(),this.setState({selectedRecord:a,showViewRecordModal:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleDeleteActionButtonClick",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getSelectedRecordId(t),!window.confirm("Are you sure you want to delete this ".concat(this.props.entityName," with id: ").concat(n,"?"))){e.next=8;break}return e.next=5,this.props.delete(n);case 5:204===(a=e.sent)&&this.resetDatatable(),404===a&&alert("Failed to delete ".concat(this.props.entityName," with id: ").concat(n,", 404 Record not found"));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleBulkDeletingButton",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.getCheckedRecordsIds()).length>0)){e.next=12;break}if(!window.confirm("Are you sure you want to delete the selected records:?\n[".concat(t.join(", "),"]"))){e.next=10;break}return this.showFullScreenLoader(),e.next=7,this.props.bulkDelete(t);case 7:e.sent,this.hideFullScreenLoader(),this.resetDatatable();case 10:e.next=13;break;case 12:alert("Please select the records to be deleted");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCloseModalClick",value:function(e){"addModal"===e&&this.setState({showCreateRecordModal:!1}),"editModal"===e&&this.setState({showUpdateRecordModal:!1}),"viewModal"===e&&this.setState({showViewRecordModal:!1})}},{key:"handlePaginationPreviousClick",value:function(e){this.previousPage()}},{key:"handlePaginationNextClick",value:function(e){this.nextPage()}},{key:"handlePaginationNumberClick",value:function(e){this.setPageOnPagination(e)}},{key:"getCheckedRecordsIds",value:function(){var e=this;return Object.keys(this.state.checkboxes).filter((function(t){if(e.state.checkboxes[t])return t}))}},{key:"getSelectedRecordId",value:function(e){return e.target.closest("tr").dataset.id}},{key:"showFullScreenLoader",value:function(){this.setState({showFullScreenLoader:!0})}},{key:"hideFullScreenLoader",value:function(){this.setState({showFullScreenLoader:!1})}},{key:"previousPage",value:function(){var e=this.state.pagination.page;e>1&&e--,this.setPageOnPagination(e)}},{key:"nextPage",value:function(){var e=this.state.pagination.page;e<this.state.pagination.totalPages&&e++,this.setPageOnPagination(e)}},{key:"setPageOnPagination",value:function(e){var t,n;t=1!==e,n=e!==this.state.pagination.totalPages,this.fillDatatable(null,e),this.setState({pagination:Object(G.a)(Object(G.a)({},this.state.pagination),{},{page:e,isPreviousEnabled:t,isNextEnabled:n})})}},{key:"render",value:function(){var e={};return this.props.formFields?e=this.props.formFields:this.state.data&&(e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"camelCase",n={};if(e){for(var a in e[0]?e[0]:e){var r=E(a,t);n[r]={type:"text",disabled:!1},"id"!==r&&(n[r].isRequired=!0)}return n}}(this.state.data,"camelCase")),Object(m.jsxs)("div",{className:"section",id:"".concat(this.props.entityName),children:[Object(m.jsxs)("h2",{className:"section-title",children:[E(this.props.entityName,"pascalCase")," CRUD"]}),Object(m.jsx)(Z,{action:"create",entityName:this.props.entityName,create:this.props.create,show:this.state.showCreateRecordModal,formFields:e,fillDatatable:this.fillDatatable,onCloseClick:this.handleCloseModalClick.bind(this,"addModal"),resetDatatable:this.resetDatatable}),Object(m.jsx)(Z,{action:"update",entityName:this.props.entityName,update:this.props.update,findById:this.props.findById,selectedRecord:this.state.selectedRecord,formFields:e,show:this.state.showUpdateRecordModal,fillDatatable:this.fillDatatable,onCloseClick:this.handleCloseModalClick.bind(this,"editModal"),resetDatatable:this.resetDatatable}),this.state.showViewRecordModal&&Object(m.jsx)(te,{record:this.state.selectedRecord,onCloseClick:this.handleCloseModalClick.bind(this,"viewModal")}),Object(m.jsx)(_,{title:"Search: ",value:this.state.searchText,onInputChange:this.handleSearchValueChange,onSearchClick:this.handleSearchClick,typeOfButton:"background"}),Object(m.jsxs)(X,{children:[Object(m.jsx)(x,{title:"Add Record",spacing:"none",onClick:this.handleAddRecordModalClick}),this.props.bulkDeleting&&Object(m.jsx)(x,{title:"Bulk Delete",spacing:"none",onClick:this.handleBulkDeletingButton})]}),!this.state.isDataLoaded&&Object(m.jsx)("div",{className:"loader-container",children:Object(m.jsx)(H,{})}),this.state.isDataLoaded&&this.state.data.length>0&&Object(m.jsx)(W,{theme:"red",columns:this.props.columns,rows:this.state.data,checkboxes:this.state.checkboxes,onCheckboxValueChange:this.handleCheckboxValueChange,bulkDeleting:this.props.bulkDeleting,actionButtons:this.props.actionButtons,onEditActionButtonClick:this.handleEditActionButtonClick,onViewActionButtonClick:this.handleViewActionButtonClick,onDeleteActionButtonClick:this.handleDeleteActionButtonClick}),this.state.isDataLoaded&&!this.state.data.length&&Object(m.jsx)(ce,{}),Object(m.jsx)(ae,{show:this.state.showFullScreenLoader}),this.props.pagination&&Object(m.jsx)(se,{totalPages:this.state.pagination.totalPages,activePage:this.state.pagination.page,isPreviousEnabled:this.state.pagination.isPreviousEnabled,isNextEnabled:this.state.pagination.isNextEnabled,onPreviousClick:this.handlePaginationPreviousClick,onNextClick:this.handlePaginationNextClick,onPageNumberClick:this.handlePaginationNumberClick})]})}}]),n}(r.a.Component);ie.defaultProps={actionButtons:!0,bulkDeleting:!0,pagination:!0,perPage:10};var oe=ie;function le(){return ue.apply(this,arguments)}function ue(){return(ue=Object(u.a)(o.a.mark((function e(){var t,n,a,r,c,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:null,n=s.length>1&&void 0!==s[1]?s[1]:null,r="".concat(C,"\\customers"),t&&(r="".concat(r,"?page=").concat(t),n&&(r="".concat(r,"&per_page=").concat(n))),e.next=6,fetch(r);case 6:return a=e.sent,e.next=9,a.json();case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return de.apply(this,arguments)}function de(){return(de=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/customers/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e){return be.apply(this,arguments)}function be(){return(be=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"\\customers?name=").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"\\customers"),{method:"POST",body:JSON.stringify({name:t.name})});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"\\customers\\").concat(t.id),{method:"PUT",body:JSON.stringify({name:t.name})});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"\\customers\\").concat(t),{method:"delete"});case 2:return n=e.sent,e.abrupt("return",n.status);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return me(e)})),e.next=3,Promise.all(n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r,c,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:null,n=s.length>1&&void 0!==s[1]?s[1]:null,r="".concat(C,"/accounts"),t&&(r="".concat(r,"?page=").concat(t),n&&(r="".concat(r,"&per_page=").concat(n))),e.next=6,fetch(r);case 6:return a=e.sent,e.next=9,a.json();case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Oe(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/accounts/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xe=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/accounts?name=").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var ge=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/accounts"),{method:"POST",body:JSON.stringify({name:t.name,balance:t.balance,customerId:t.customerId})});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/accounts/").concat(t.id),{method:"PUT",body:JSON.stringify({name:t.name,balance:t.balance,customerId:t.customerId})});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"\\accounts\\").concat(t),{method:"delete"});case 2:return n=e.sent,e.abrupt("return",n.status);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={searchValue:"",record:{},loading:!1,isLoaded:!1},a.handleSearchClick=a.handleSearchClick.bind(Object(b.a)(a)),a.handleSearchValueChange=a.handleSearchValueChange.bind(Object(b.a)(a)),a}return Object(p.a)(n,[{key:"handleSearchClick",value:function(e){var t=this.state.searchValue;t?this.showRecordDetails(t):alert("".concat(this.props.entityName," id cannot be empty"))}},{key:"handleSearchValueChange",value:function(e){this.setState({searchValue:e})}},{key:"showRecordDetails",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0,isLoaded:!1}),e.next=3,this.props.findById(t);case 3:(n=e.sent)&&!n.error?this.setState({record:n}):this.setState({record:{}}),this.setState({loading:!1,isLoaded:!0});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"section section--height-fullviewport",children:[Object(m.jsxs)("h2",{className:"section-title",children:[this.props.entityName," Details"]}),Object(m.jsx)(_,{title:"".concat(this.props.entityName," id: "),value:this.state.searchValue,onInputChange:this.handleSearchValueChange,onSearchClick:this.handleSearchClick}),this.state.loading&&Object(m.jsx)("div",{className:"loader-container",children:Object(m.jsx)(H,{})}),this.state.isLoaded&&Object.keys(this.state.record).length>0&&Object(m.jsx)(ee,{record:this.state.record}),this.state.isLoaded&&0===Object.keys(this.state.record).length&&Object(m.jsx)(ce,{})]})}}]),n}(r.a.Component);var Se=function(){return Object(m.jsxs)("div",{className:"app container",children:[Object(m.jsx)(L,{}),Object(m.jsx)(Ne,{entityName:"Accounts",findById:Oe}),Object(m.jsx)(Ne,{entityName:"Customers",findById:he}),Object(m.jsx)(oe,{entityName:"customer",create:fe,update:je,read:le,findById:he,search:pe,delete:me,bulkDelete:ke,actionButtons:!0,bulkDeleting:!0,pagination:!0,perPage:5}),Object(m.jsx)(oe,{entityName:"account",columns:{customer_id:"Customer Identification",id:"Identification",name:"Short Name"},create:ge,update:ye,read:ve,findById:Oe,search:xe,delete:we,bulkDeleting:!1,pagination:!1})]})},Ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,66)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(Se,{})}),document.getElementById("root")),Ae()}},[[65,1,2]]]);
//# sourceMappingURL=main.76ebeb48.chunk.js.map